<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link href='https://fonts.googleapis.com/css?family=Dosis|Asap' rel='stylesheet' type='text/css'>
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/angular-motion/dist/angular-motion.css" />
    <link rel="stylesheet" href="bower_components/bootstrap-additions/dist/bootstrap-additions.min.css" />
    <link rel="stylesheet" href="bower_components/animate.css/animate.css" />
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body ng-app="cliquePlayApp">
    <!--[if lt IE 9]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
  <div id="fore">
    <!-- Add your site or application content here -->
    <div id="header" ng-cloak="">
      <ul>
        <li><a id="gamedash" class="cp-background" style="top:5px" ng-href="#/gamedash">Game Dash</a></li>
        <li>
          <a class="cp-background" style="top:70px;padding-bottom:10px" ng-hide-auth="" href="#/login">Login</a>
          <a class="cp-background cp-small-link" style="top:70px" ng-show-auth="" href="#/account">Account</a>
        </li>
      </ul>
    </div>

    <div id="content" class="cp-background">
      <div ng-view="" class="main-content content-block"></div>
    </div>

    <div ng-show-auth="" class="chat" ng-controller="ChatCtrl">
      <div id="greeting" ng-if="user" ng-cloak="" >
         <span>{{profile.userName}} </span>
         <img ng-src="{{profile.avatarURL}}" alt="profile image" class="img-rounded">
      </div>
      <a id="brand" class="cp-background" href="#/">
        ( CliquePlay )
      </a>
      <div id="header">
        <ul>
          <li>
            <a class="cp-background cp-small-link" style="top:70px;left:106px;margin-top:0;width:99px" ng-click="logout()">Logout</a>
          </li>
        </ul>
      </div>
      <div class="content-block">

        <div id="panel-left-users-outer" class="cp-background" ng-cloak="">
          <ul class="panel-left-users">
            <li ng-repeat="u in usersArray | filter:search.userQuery" ng-if="profile.avatarURL != u.avatarURL" ng-mouseover="u._hover = true" ng-mouseleave="u._hover = false" class="users user-{{u.status}} animate-repeat">
              <div class="user-image {{u.status}}">
                <img ng-src="{{u.avatarURL}}" alt="" class="avatar {{u.status}}">
              </div>
              <div class="user-info">
                <span class="name" >{{u.userName}}</span><br>
                <span class="timestamp" ng-if="u.status != 'online'" am-time-ago="u.lastOnline"></span>
              </div>
              <div class="user-hover fade-in-out" ng-if="u._hover" ng-click="createChat('', '', true, [u.$id])">
                <span class="fa fa-comment-o"></span>
              </div>
              <div class="clearfix"></div>
            </li>
          </ul>
          <div class="search-form" ng-if="showUserSearch">
            <input type="text" placeholder="Search Users..." ng-model="search.userQuery" class="user-search" />
          </div>
          <div class="search-icon" ng-click="showUserSearch = !showUserSearch">
            <span class="fa" ng-class="{'fa-search-plus':!showUserSearch,'fa-search-minus':showUserSearch}"></span>
          </div>
        </div>

        <div class="panel-left-chats-outer" ng-cloak="">
          <div class="panel-left-chats">
            <div ng-repeat="chat in chatRooms | filter:search.chatQuery" class="chat-control cp-background animate-repeat" ng-click="joinChat(chat)">
              <span>{{chat.name}}</span>
              <span class="fa fa-angle-right pull-right" aria-hidden="true"></span>
              <span class="fa fa-info-circle pull-right" bs-tooltip data-placement="bottom" data-title="{{chat.description}}" aria-hidden="true"></span>
            </div>
          </div>
        </div>
        <div class="chat-search-form" >
          <input type="text" placeholder="Search Public Chats..." ng-model="search.chatQuery" class="chat-search cp-background" />
<!--           <div class="search-icon" ng-click="showChatSearch = !showChatSearch">
            <span class="fa" ng-class="{'fa-search-plus':!showChatSearch,'fa-search-minus':showChatSearch}"></span>
          </div> -->
        </div>

        <div class="panel-right-outer" ng-cloak="">
          <div id="panel-right">
            <div ng-repeat="chat in userChats | orderBy:'priority' " class="user-chat animate-repeat" ng-class="{'chat-open':chat._open,'chat-closed':!chat._open,'new-message':chat._newMessage}">
              <div class="chat-control cp-background" ng-class="{'animated-slow flash-half infinite':chat._newMessage}">
                <span class="fa fa-angle-up pull-right" aria-hidden="true" 
              ng-click="toggleChat(chat.$id)"></span>
                <span class="chat-control-text">{{chat.name}}</span>
                <img ng-repeat="(id,value) in chat._members" ng-if="user.uid != id" class="img-circle chat-icon chat-control-left" ng-src="{{users[id].avatarURL}}" alt="" bs-tooltip data-placement="bottom" data-title="{{users[id].userName}} ({{users[id].status}})" data-delay="150" aria-hidden="true">
                <span class="fa fa-plus-circle add-user" ng-click="setFocusChat(chat);newUserModal.show()"></span>
              </div>
              <div class="chat-body" ng-if="chat._open">
                <div class="chat-box-outer cp-background-dark">
                  <div class="chat-box">  
                    <ul id="messages" class="chat" >
                      <li ng-repeat="messageBlock in userMessageBlocks[chat.$id]" 
                      ng-class="{righttext:(messageBlock.userName != user.uid)}"
                      ng-click="log()">
                        <div class="user-image" ng-if="messageBlock.userName == user.uid">
                          <img ng-src="{{profile.avatarURL}}" alt="{{profile.userName}}" class="current-user-avatar" />
                          <p class="user-name" style="left:0px">{{profile.userName}} &bull;
                           <span am-time-ago="messageBlock.lastUpdated"></span>
                          </p>
                        </div>
                        <div class="message-block">
                          <span ng-repeat="message in messageBlock.messages">{{message.message}}<br/></span>
                        </div>
                        <div class="user-image {{users[messageBlock.userName].status}}" ng-if="messageBlock.userName != user.uid">
                          <img ng-src="{{users[messageBlock.userName].avatarURL}}" alt="{{users[messageBlock.userName].userName}}" class="avatar {{users[messageBlock.userName].status}}" />
                          <p class="user-name" style="right:0px">{{users[messageBlock.userName].userName}} &bull; 
                           <span am-time-ago="messageBlock.lastUpdated"></span>
                          </p>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
                <form id="chat-form">
                  <input class="chat-input" id="input{{$index}}" placeholder="Message..." ng-model="message" ng-click="chat._newMessage=false;">
                  <button type="submit" ng-click="addMessage(message,chat,$index);message = null;chat._newMessage=false;" style="display:none"></button>
                </form>
              </div>
            </div>
          </div>
        </div>
        
        <div class="new-chat cp-background" ng-click="newChatModal.show()">
          New Chatroom
        </div>

      </div>
    </div>
  </div>

  <ul id="scene">
    <li class="layer" data-depth="1.00"><div class="layer-1"></div></li>
    <li class="layer" data-depth="1.00"><div class="layer-2"></div></li>
    <li class="layer" data-depth="1.00"><div class="layer-3"></div></li>
    <li class="layer" data-depth="1.00"><div class="layer-4"></div></li>
    <li class="layer" data-depth="1.00"><div class="layer-5"></div></li>
    <li class="layer" data-depth="1.00"><div class="layer-6"></div></li>
    <li class="layer" data-depth="1.00"><div class="layer-7"></div></li>
    <li class="layer" data-depth="1.00"><div class="layer-8"></div></li>
    <!-- <li class="layer" data-depth="1.00"><div class="layer-9"></div></li> -->
    <!-- <li class="layer" data-depth="1.00"><div class="layer-10"></div></li> -->
    <!-- <li class="layer" data-depth="1.00"><div class="layer-11"></div></li> -->
    <!-- <li class="layer" data-depth="1.00"><div class="layer-12"></div></li> -->
  </ul>

  <div id="alerts-container"></div>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
     <script>
       !function(A,n,g,u,l,a,r){A.GoogleAnalyticsObject=l,A[l]=A[l]||function(){
       (A[l].q=A[l].q||[]).push(arguments)},A[l].l=+new Date,a=n.createElement(g),
       r=n.getElementsByTagName(g)[0],a.src=u,r.parentNode.insertBefore(a,r)
       }(window,document,'script','//www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-XXXXX-X');
       ga('send', 'pageview');
    </script>

    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/firebase/firebase.js"></script>
    <script src="bower_components/angularfire/dist/angularfire.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/angular-cookies/angular-cookies.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/angular-touch/angular-touch.js"></script>
    <script src="bower_components/angular-strap/dist/angular-strap.js"></script>
    <script src="bower_components/angular-strap/dist/angular-strap.tpl.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap.js"></script>
    <script src="bower_components/ng-idle/angular-idle.js"></script>
    <script src="bower_components/moment/moment.js"></script>
    <script src="bower_components/angular-moment/angular-moment.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
    <!-- <script src="scripts/parallax.js"></script> -->
        <!-- build:js({.tmp,app}) scripts/scripts.js -->
        <script src="scripts/modernizr.custom.68726.js"></script>
        <script src="scripts/app.js"></script>
        <script src="scripts/controllers/main.js"></script>
        <script src="scripts/angularfire/config.js"></script>
        <script src="scripts/angularfire/firebase.ref.js"></script>
        <script src="scripts\controllers\chat.js"></script>
        <script src="scripts\filters\reverse.js"></script>
        <script src="scripts/angularfire/auth.js"></script>
        <script src="scripts\controllers\login.js"></script>
        <script src="scripts\controllers\account.js"></script>
        <script src="scripts\controllers\gamedash.js"></script>
        <script src="scripts/directives/ngShowAuth.js"></script>
        <script src="scripts/directives/ngHideAuth.js"></script>
        <script src="scripts\routes.js"></script>
        <script src="scripts/filters/messagerange.js"></script>
        <script src="scripts/controllers/yahtzee.js"></script>
        <!-- endbuild -->
</body>
</html>
